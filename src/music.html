<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content=
"HTML Tidy for Windows (vers 14 February 2006), see www.w3.org" />
<title>JavaScript Powered Arduino Light Theremin</title>

<script type="text/javascript">
//<![CDATA[
  function changeBackground(lum) {
    document.body.style.backgroundColor="hsl(0,0%,"+lum+"%)";
    document.getElementById('heading').innerText=lum;
  }

  /* Define the positions of the tones in the array (corresponds to the array in the Arduino code). */
  var c4 = 0, cs4 = 1, d4 = 2, ds4 = 3, e4 = 4, f4 = 5, fs4 = 6, g4 = 7, gs4 = 8, a4 = 9, as4 = 10, b4 = 11;
  var c5 = 12, cs5 = 13, d5 = 14, ds5 = 15, e5 = 16, f5 = 17, fs5 = 18, g5 = 19, gs5 = 20, a5 = 21, as5 = 22, b5 = 23;
  
  /*
  var happyBirthday = [ g4, a4, g4, c5, b4, b4, g4, a4, g4, d5, c5,c5, g4,  g5, e5, c5, b4, a4, a4, f5, e5, c5, d5, c5, c5    ];
  */
  
  var elise = [  
    e5, ds5, e5, ds5, e5, b4, d5, c5, a4,a4,a4,
    c4, e4, a4, b4,b4,b4, e4, a4, b4, c5,c5,c5,
    
    e5, ds5, e5, ds5, e5, b4, d5, c5, a4,a4,a4,
    c4, e4, a4, b4,b4,b4, e4, c5, b4, a4,a4,a4,
    
    b4, c5, d5, e5,e5,e5, g4, f5, e5, d5,d5,d5, e4, e5, d5, c5,c5,c5, e4, d5, c5, b4,b4,b4,b4,b4,b4,
    
    e5, ds5, e5, ds5, e5, b4, d5, c5, a4,a4,a4,
    c4, e4, a4, b4,b4,b4, e4, a4, b4, c5,c5,c5,
    
    e5, ds5, e5, ds5, e5, b4, d5, c5, a4,a4,a4,
    c4, e4, a4, b4,b4,b4, e4, c5, b4, a4,a4,a4 ];
  
  /* 
    melody: an array containing tones
  */
  function playSong(melody, noteDuration) {
    var intervals = 24;
    
    for(var i = 0; i < melody.length; i++) {
      var note = melody[i];
      
      /* Calculate the L of the HSL-value of the background. */
      var lumin = 100 - 100/intervals*note;
      
      /* see http://stackoverflow.com/a/6425113 */
      setTimeout( (function(lumin) { return function() { changeBackground(lumin); } })(lumin), i*noteDuration);
    }
  }
//]]>
</script>
</head>
<body onload="">
<h1 id="heading"></h1>
<a href="javascript:playSong(elise,%20250)">Play 'F&uuml;r Elise'</a>
</body>
</html>
